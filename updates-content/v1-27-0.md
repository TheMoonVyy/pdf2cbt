### Added Text Pattern Based Cropper for PDF Cropper

So far in PDF Cropper, we had to manually crop the questions. While this ensured that the cropped questions were accurate, it was also quite tedious.

To solve this issue, we can now use text patterns in PDF to locate and determine the crop area.

There are the 3 things that need to be determined:

1.  **Subject**: Where a subject starts and ends.
2.  **Section**: Where a section starts, ends, and which subject it belongs to.
3.  **Question**: Where a question starts and ends, its coordinates on the page, the area it spans, and which subject/section it belongs to.

Now, how do we determine points 1 and 2?

In PDFs, there are often headings that signal that the subsequent content belongs to that category.

For example, consider this PDF content structure:
```
Physics

Physics Section 1

Q1. some question content here

Q2. some question content here

Q3. some question content here

Physics Section 2

Q4. some question content here

Q5. some question content here

Chemistry

Chemistry Section 1

Q6. some question content here
```

From this, we know that:

-   **Q1**, **Q2**, and **Q3** belong to **Physics Section 1**, which in turn belongs to **Physics**.
-   **Q4** and **Q5** belong to **Physics Section 2**, which in turn belongs to **Physics**.
-   **Q6** belongs to **Chemistry Section 1**, which in turn belongs to **Chemistry**.

Now, thinking about this from an algorithmic point of view:

-   For subjects, we can search for all subject headings (e.g., "Physics", "Chemistry").
-   When a subject is found (say "Physics"), search for its section headings (e.g., "Physics Section 1", "Physics Section 2") while also searching for the remaining subjects (e.g., "Chemistry").
-   When a section is found, search for its questions while also searching for other remaining sections of this subject and other remaining subjects.
-   When a question is found, determine its area to be cropped.

For subjects, their heading acts as a start signal, and the next subject's heading acts as an end signal for the current subject. The same logic applies to sections.

For questions, their number format can be used as a start signal, and the next question number signals the end of the current question.

But what should the search pattern be? Should we just look for common formats like "Q1.", "1.", or "Q1)"?

So now the choice is to either come up with a general format that handles all cases, but might result in matching unintended text (due to having too many pattern variations), or create narrow, specific patterns for different PDF formats and store them as separate configuration files.

Since the first approach would limit the cropper to only a few patterns and would have a higher chance of incorrect matches, the pattern-based cropper is built using the second approach: a config-based system.

So, if we make a config for a specific PDF structure (or template), that config can be reused for all PDFs that follow the same structure.

As this feature is all about text patterns:

-   [Regex](https://en.wikipedia.org/wiki/Regular_expression) (Regular Expression) is supported, which is a big help for many pattern formats. Therefore, having some basic knowledge of regex will be helpful. When entering a regex pattern, make sure you are in the regex mode for that input field (the icon with "**.\***" should be visible).
    -   Note that for the regex pattern, you only need to enter the pattern itself, excluding the delimiters and flags (i.e., instead of `/pattern/flags`, just enter the **pattern** part). The pattern must be supported by JavaScript.
    -   You can use online sites like [regex101](https://regex101.com/) for writing regex patterns (make sure to select ECMAScript (JavaScript) under the Flavor section).
-   An alternative to regex is to enter the exact text to search for in the pattern input fields, just as you would when searching for text in a file editor. Make sure that you are in the text mode of that input field (the icon with "**TXT**" should be visible).
Internally, this text pattern is converted to a regex pattern. Because this feature relies so heavily on regex, I have been internally calling the "Text Pattern Based Cropper" or "Pattern Mode" as "Regex Mode" of PDF Cropper.

A form (a UI with input boxes, switches, etc.) is provided to create the configs.

New configs can be created by basing on existing configs (as many settings may be the same).

Input fields in the form have an info tooltip (an 'i' icon) where needed, which provides more details on their purpose, examples, etc.

#### Notes

-   Because this feature relies on the text data within the PDF itself (not OCR), it will only work for proper PDFs that contain selectable text. It will **not** work for PDFs created by converting images, such as scanned documents.

-   As of now, this feature is most useful for test formats that are already known and fixed, like JEE Main, UGEE, BITSAT, COMEDK, etc. This is because it requires data like subject name, section name, question type, and marking scheme. For test formats that change, like JEE Advanced, you might have to edit the config multiple times to account for the different combinations of question types and marking schemes. I plan to add a feature later on to **extract** the question type and marking scheme from the PDF itself based on text patterns (e.g., a phrase like "Only one of the four options is correct" would suggest it's an MCQ).

-   The Pattern Based Cropper is meant to be as accurate as possible, but 100% accuracy is practically impossible. Its success depends on the config provided and the consistency of the PDF's structure (which can sometimes be inconsistent). Thus, it is **advised** to review the cropped results after running the pattern-based cropper. You can fix any unexpected results using the edit mode and manual cropper tools.

I will be providing some configs for popular PDF formats this week (I currently have my mid-sems, so I'm busy with that).
